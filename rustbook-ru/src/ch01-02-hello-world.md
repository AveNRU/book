## Привет, мир!

Теперь, когда вы установили Rust, пришло время написать свою первую программу на Rust. Привычно при изучении нового языка принято писать небольшую программу, которая печатает на экране текст `Привет, мир!`, поэтому мы сделаем то же самое!

>  Примечание: Эта книга предполагает наличие достаточного навыка работы с приказной строкой. Ржавчина не предъявляет особых требований к тому, каким набором средств вы пользуетесь для изменения или хранения вашего кода, поэтому если вы предпочитаете использовать встроенную среду разработки (IDE) вместо приказной строки, смело используйте вашу любимую IDE. Многие IDE сейчас в той или иной степени поддерживают Rust; подробности можно узнать из документации к IDE. Объединение Ржавчина сосредоточилась на обеспечении отличной поддержки IDE с помощью `rust-analyzer`. Более подробную сведения смотрите в [Приложении D](appendix-04-useful-development-tools.md)<!-- ignore -->.
>

### Создание папки дела

Прежде всего начнём с создания папки, в которой будем сохранять наш код на языке Rust. На самом деле не важно, где сохранять наш код. Однако, для упражнений и дел, обсуждаемых в данной книге, мы советуем создать папку *projects* в вашем домашнем папке, там же и хранить в будущем код программ из книги.

Откройте окно вызова и введите следующие приказы для того, чтобы создать папку <em>projects</em> для хранения кода разных дел, и, внутри неё, папку <em>hello_world</em> для дела “Привет, мир!”.

Для Linux, macOS и PowerShell на Windows, введите:

```console
$ mkdir ~/projects
$ cd ~/projects
$ mkdir hello_world
$ cd hello_world
```

Для Windows в CMD, введите:

```cmd
> mkdir "%USERPROFILE%\projects"
> cd /d "%USERPROFILE%\projects"
> mkdir hello_world
> cd hello_world
```

### Написание и запуск первой Ржавчина программы

Затем создайте новый исходный файл и назовите его *main.rs*. Файлы Ржавчина всегда заканчиваются расширением *.rs*. Если вы используете более одного слова в имени файла, принято разделять их символом подчёркивания. Например, используйте *hello_world.rs* вместо *helloworld.rs*.

Теперь откроем файл *main.rs* для изменения и введём следующие строки кода:

<span class="filename">Название файла: main.rs</span>

```rust
fn main() {
    println!("Привет, мир!");
}
```

<span class="caption">Приложение 1-1: Программа, которая печатает <code>Привет, мир!</code></span>

Сохраните файл и вернитесь в окно окна вызова в папка *~/projects/hello_world*. В Linux или macOS введите следующие приказы для сборки и запуска файла:

```console
$ rustc main.rs
$ ./main
Привет, мир!
```

В Windows, введите приказ `.\main.exe` вместо `./main`:

```powershell
> rustc main.rs
> .\main.exe
Привет, мир!
```

Независимо от вашей операционной системы, строка `Привет, мир!` должна быть выведена на окно вызова. Если вы не видите такого вывода, обратитесь к разделу ["Устранение неполадок "]<!-- ignore -->, чтобы узнать, как получить помощь.

Если напечаталось `Привет, мир!`, то примите наши поздравления! Вы написали программу на Rust, что делает вас Ржавчина программистом — добро пожаловать!

### Анатомия программы на Rust

Давайте рассмотрим «Привет, мир!» программу в подробностях. Вот первая часть головоломки:

```rust
fn main() {

}
```

Эти строки определяют функцию с именем `main`. Функция `main` особенная: это всегда первый код, который запускается в каждой исполняемой программе Rust. Первая строка объявляет функцию с именем `main`, которая не имеет свойств и ничего не возвращает. Если бы были свойства, они бы заключались в круглые скобки `()`.

Тело функции заключено в `{}`. Ржавчина требует фигурных скобок вокруг всех тел функций. Хороший исполнение — поместить открывающую фигурную скобку на ту же строку, что и объявление функции, добавив между ними один пробел.

>  Примечание: Если хотите придерживаться принятого исполнения во всех делах Rust, вы можете использовать средство самостоятельного изменения под названием `rustfmt` для изменения кода в определённом исполнении (подробнее о `rustfmt` в [Приложении D](appendix-04-useful-development-tools.md)<!-- ignore -->. Объединение Ржавчина включила этот средство в обычный установочный набор Rust, как `rustc`, поэтому он уже должен быть установлен на вашем компьютере!
>

Тело функции `main` содержит следующий код:

```rust
    println!("Привет, мир!");
```

Эта строка делает всю работу в этой маленькой программе: печатает текст на экран. Можно заметить четыре важных подробности.

Во-первых, исполнение Ржавчина предполагает отступ в четыре пробела, а не табуляцию.

Во-вторых, `println!` вызывается макрос Rust. Если бы вместо него была вызвана функция, она была бы набрана как `println` (без `!`). Более подробно мы обсудим макросы Ржавчина в главе 19. Пока достаточно знать, что использование `!` подразумевает вызов макроса вместо обычной функции, и что макросы не всегда подчиняются тем же правилам как функции.

В-третьих, вы видите строку `"Привет, мир!"`. Мы передаём её в качестве переменной макросу `println!`, и она выводится на экран.

В-четвёртых, мы завершаем строку точкой с запятой (`;`), которая указывает на окончание этого выражения и возможность начала следующего. Большинство строк кода Ржавчина заканчиваются точкой с запятой.

### Сборка и запуск - это отдельные шаги

Вы только что запустили впервые созданную программу, поэтому давайте рассмотрим каждый шаг этого этапа.

Перед запуском программы на Ржавчина вы должны собрать её с помощью сборщика Rust, введя приказ `rustc` и передав ей имя вашего исходного файла, например:

```console
$ rustc main.rs
```

Если у вас есть опыт работы с C или C++, вы заметите, что это похоже на `gcc` или `clang`. После успешной сборки Ржавчина выводит двоичный исполняемый файл.

В Linux, macOS и PowerShell в Windows вы можете увидеть исполняемый файл, введя приказ `ls` в оболочке:

```console
$ ls
main  main.rs
```

В Linux и macOS вы увидите два файла. При использовании PowerShell в Windows вы увидите такие же три файла, как и при использовании CMD. Используя CMD в Windows, введите следующее:

```cmd
> dir /B %= the /B option says to only show the file names =%
main.exe
main.pdb
main.rs
```

Это показывает исходный код файла с расширением *.rs*, исполняемый файл (*main.exe* на Windows, но *main* на всех других площадках) и, при использовании Windows, файл, содержащий отладочную сведения с расширением *.pdb*. Отсюда вы запускаете файлы *main* или *main.exe*, например:

```console
$ ./main # для Linux
> .\main.exe # для Windows
```

Если ваш *main.rs* — это ваша программа «Привет, мир!», эта строка выведет в окно вызова `Привет, мир!`.

Если вы лучше знакомы с изменяемыми языками, такими как Ruby, Python или JavaScript, возможно, вы не привыкли собирать и запускать программу как отдельные шаги. Ржавчина — это предварительно *собранный* язык, то есть вы можете собрать программу и передать исполняемый файл кому-то другому, и он сможет запустить его даже без установленного Rust. Если вы даёте кому-то файл *.rb* , *.py* или *.js*, у него должна быть установлена выполнение Ruby, Python или JavaScript (соответственно). Но в этих языках вам нужна только одна приказ для сборки и запуска вашей программы. В внешнем виде языков программирования всё — соглашение.

Сборка с помощью `rustc` подходит для простых программ, но по мере роста вашего дела вы захотите управлять всеми свойствами и упростить передачу кода. Далее мы познакомим вас с средством Cargo, который поможет вам писать программы из существующего мира на Rust.


["Устранение неполадок "]: ch01-01-installation.html#troubleshooting