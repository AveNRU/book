# Написание автоматизированных проверок

В своём эссе 1972 года “The Humble Programmer,” Edsger W. Dijkstra сказал, что «Проверка программы может быть очень эффективным способом показать наличие ошибок, но это безнадёжно неадекватно для показа их отсутствия». Это не значит, что мы не должны пытаться проверять столько, сколько мы можем!

Соблюдение правил программы считается то, в какой степени наш код выполняет именно то, что мы задумывали. Rust разработан с учётом большой озабоченности соблюдением правил программ, но соблюдение правил сложна и нелегко доказуема. Система типизации Rust берет на себя огромную часть этого бремени, но она не может уловить абсолютно все сбоев. Поэтому в Rust предусмотрена возможность написания автопроверок.

Допустим, мы пишем функцию `add_two`, которая прибавляет 2 к любому переданному ей числу. Сигнатура этой функции принимает целое число в качестве свойства и возвращает целое число в качестве итога. Когда мы реализуем и собираем эту функцию, Rust выполняет всю проверку видов и проверку заимствований, которую вы уже изучили, чтобы убедиться, что, например, мы не передаём значение `String` или недопустимую ссылку в эту функцию. Но Rust *не способен* проверить, что эта функция сделает именно то, что мы задумали, то есть вернёт свойство плюс 2, а не, скажем, свойство плюс 10 или свойство - 50! Вот тут-то и приходят на помощь проверки.

Мы можем написать проверки, которые утверждают, например, что когда мы передаём `3` в функцию `add_two`, возвращаемое значение будет `5`. Мы можем запускать эти проверки всякий раз, когда мы вносим изменения в наш код, чтобы убедиться, что любое существующее правильное поведение не изменилось.

Проверка - сложный навык: мы не сможем охватить все подробности написания хороших проверок в одной главе, но мы обсудим основные подходы к проверке в Rust. Мы поговорим об изложениех и макросах, доступных вам для написания проверок, о поведении по умолчанию и свойствах, предусмотренных для запуска проверок, а также о том, как организовать проверки в модульные проверки и встроенные проверки.
